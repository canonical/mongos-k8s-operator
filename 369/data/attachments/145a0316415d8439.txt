[32mINFO    [0m integration.upgrade_tests.test_rollback:test_rollback.py:65 Wait for upgrade to fail
[32mINFO    [0m integration.upgrade_tests.test_rollback:test_rollback.py:77 Re-refresh the charm
[32mINFO    [0m integration.upgrade_tests.test_rollback:test_rollback.py:82 Wait for the charm to be rolled back
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  mongos-k8s/0 [idle] active: MongoDB 6.0.6 running (restart pending); Charm revision 1
  mongos-k8s/1 [idle] active: MongoDB 6.0.6 running (restart pending); Charm revision 1
  mongos-k8s/2 [executing] maintenance: 
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  mongos-k8s/0 [idle] active: MongoDB 6.0.6 running (restart pending); Charm revision 1
  mongos-k8s/1 [idle] active: MongoDB 6.0.6 running (restart pending); Charm revision 1
  mongos-k8s/2 [idle] active: MongoDB 6.0.6 running; Charm revision 1
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  mongos-k8s/0 [executing] active: 
  mongos-k8s/1 [executing] active: MongoDB 6.0.6 running; Charm revision 1
  mongos-k8s/2 [executing] active: MongoDB 6.0.6 running; Charm revision 1
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  mongos-k8s/0 [executing] maintenance: 
  mongos-k8s/1 [idle] active: MongoDB 6.0.6 running; Charm revision 1
  mongos-k8s/2 [idle] active: MongoDB 6.0.6 running; Charm revision 1
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  mongos-k8s/0 [idle] active: 
  mongos-k8s/1 [idle] active: 
  mongos-k8s/2 [idle] active:
[32mINFO    [0m pytest_operator.plugin:plugin.py:834 Model status:

Model  Controller          Cloud/Region        Version  SLA          Timestamp
test   microk8s-localhost  microk8s/localhost  3.5.3    unsupported  01:38:48Z

App            Version  Status  Scale  Charm        Channel  Rev  Address         Exposed  Message
config-server           active      1  mongodb-k8s  6/edge    59  10.152.183.70   no       
mongos-k8s              active      3  mongos-k8s              2  10.152.183.121  no       
shard0                  active      1  mongodb-k8s  6/edge    59  10.152.183.125  no       

Unit              Workload  Agent  Address      Ports  Message
config-server/0*  active    idle   10.1.136.16         Primary
mongos-k8s/0      active    idle   10.1.136.20         
mongos-k8s/1*     active    idle   10.1.136.19         
mongos-k8s/2      active    idle   10.1.136.18         
shard0/0*         active    idle   10.1.136.15         Primary

[32mINFO    [0m pytest_operator.plugin:plugin.py:840 Juju error logs:

unit-config-server-0: 01:31:30 ERROR unit.config-server/0.juju-log config-server:6: Failed to add shard shard0 to the config server, error=OperationFailure("Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed', '$clusterTime': {'clusterTime': Timestamp(1729474288, 2), 'signature': {'hash': b'&7\\x8c\\xef\\x1e\\xbb\\xeae\\x1aF+6\\n~\\x81\\xe6\\xbb\\x0e}\\xa9', 'keyId': 7428035278599618585}}, 'operationTime': Timestamp(1729474288, 2)}")
unit-config-server-0: 01:31:30 ERROR unit.config-server/0.juju-log config-server:6: shard0 shard does not have the same auth as the config server.
unit-mongos-k8s-0: 01:33:13 ERROR unit.mongos-k8s/0.juju-log cluster:7: mongos service is not ready yet.
unit-mongos-k8s-2: 01:33:13 ERROR unit.mongos-k8s/2.juju-log cluster:7: mongos service is not ready yet.
unit-mongos-k8s-1: 01:33:13 ERROR unit.mongos-k8s/1.juju-log cluster:7: mongos service is not ready yet.
unit-mongos-k8s-2: 01:34:16 ERROR unit.mongos-k8s/2.juju-log cluster:7: mongos service is not ready yet.
unit-mongos-k8s-1: 01:34:16 ERROR unit.mongos-k8s/1.juju-log cluster:7: mongos service is not ready yet.
unit-mongos-k8s-0: 01:34:16 ERROR unit.mongos-k8s/0.juju-log cluster:7: mongos service is not ready yet.

[32mINFO    [0m pytest_operator.plugin:plugin.py:904 Forgetting main...